# 2020《高级地理信息系统》大作业
- [2020《高级地理信息系统》大作业](#2020高级地理信息系统大作业)
    - [功能](#功能)
        - [主窗口](#主窗口)
        - [控制](#控制)
        - [渲染](#渲染)
        - [数据](#数据)
        - [算法](#算法)
    - [TODO](#todo)
        - [控制](#控制-1)
        - [渲染](#渲染-1)
        - [数据](#数据-1)

## 功能

### 主窗口
1. 图层显示
    * 图层右键菜单
        * 可见性控制
            * 图层显示/隐藏
            * 图层各部分可见性
        * 删除图层
        * 图层上下移动
            * 置于顶层/底层
            * 上移/下移一层
        * 画布聚焦至图层
        * 属性设置面板
1. 画布
    * 信息栏
        * 以科学计数法显示当前坐标、缩放
1. 工具栏
    * 从CSV导入多点图层
    * 格网模型
        * 由离散点生成格网模型
        * 格网模型加密

### 控制
1. 浏览功能
    * 左键拖拽
    * 右键重置镜头
    * 滚轮缩放
    * 同步位置信息至画布信息栏

### 渲染
* 图层
    * 继承TreeNode类，可在控件中显示
    * 基类数据：
        * 控制参数
        * 渲染样式
    * 方法
        * 添加图层
        * 删除图层
    1. 矢量图层
        * 接入几何体渲染接口
		* 属性设置：
			* 点线面颜色
			* 点线尺寸
    1. 栅格图层
        * 按高低色阶渲染栅格数据
        * 属性设置：
            * 色阶高低数值&对应颜色
            * 栅格边框尺寸&颜色

### 数据
0. 基本几何体
    * 基类数据：
        * ID
        * 取值
    * 接口方法：
        * 渲染至窗口
        * 计算外包矩形
    1. 点
        * 数据：
            * X坐标
            * Y坐标
        * 拓扑关系：
            * 关联弧段
    1. 弧段
        * 数据：
            * 点列
        * 拓扑关系：
            * 左右多边形
        * 方法：
            * 生成点拓扑关系
            * 迭代包含线段
    1. 多边形
        * 数据：
            * 弧段
        * 方法：
            * 生成时检查弧段正反、连接
            * 迭代返回所有点

1. 栅格
    * 数据：
        * X、Y覆盖范围
        * 等分数
        * 栅格数据
    * 方法：
        * 求最大最小值

1. 线段
    * 数据：起点、终点
    * 计算：坐标差、长度、角度

### 算法
0. 基于有限状态机的CSV parser

## TODO
### 控制
* 选择功能

### 渲染
* 图层
    * 矢量图层
        * 可控制各层级显示情况
    * 渲染文本注释信息

### 数据
* 基本几何体
    1. 多边形
        * 生成弧段拓扑关系
        * 拓扑关系：相邻多边形

* 线段
    * 距已知点距离
    * 与已知线段相交位置

* 栅格类